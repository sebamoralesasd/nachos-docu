<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NachOS: Executable Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NachOS
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classExecutable-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Executable Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Assumes that the object code file is in NOFF format.  
 <a href="classExecutable.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="executable_8hh_source.html">executable.hh</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ac59733f63b147936a885235300335c75"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classExecutable.html#ac59733f63b147936a885235300335c75">Executable</a> (<a class="el" href="classOpenFile.html">OpenFile</a> *new_file)</td></tr>
<tr class="separator:ac59733f63b147936a885235300335c75"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21ef8493196b68adbc3f5104b3ebdc4e"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classExecutable.html#a21ef8493196b68adbc3f5104b3ebdc4e">CheckMagic</a> ()</td></tr>
<tr class="separator:a21ef8493196b68adbc3f5104b3ebdc4e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8220057e1a6ec2f9f33ba6d0cbeb53b4"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classExecutable.html#a8220057e1a6ec2f9f33ba6d0cbeb53b4">GetSize</a> () const</td></tr>
<tr class="separator:a8220057e1a6ec2f9f33ba6d0cbeb53b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd3930591ff8d4e13ae64b15829550ed"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classExecutable.html#afd3930591ff8d4e13ae64b15829550ed">GetCodeSize</a> () const</td></tr>
<tr class="separator:afd3930591ff8d4e13ae64b15829550ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad30aff62ce651aaa20362b508f64d700"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classExecutable.html#ad30aff62ce651aaa20362b508f64d700">GetInitDataSize</a> () const</td></tr>
<tr class="separator:ad30aff62ce651aaa20362b508f64d700"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5abd3ca2cab7ce924141da77e388d43f"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classExecutable.html#a5abd3ca2cab7ce924141da77e388d43f">GetUninitDataSize</a> () const</td></tr>
<tr class="separator:a5abd3ca2cab7ce924141da77e388d43f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac03c2ecc61c763810fb2b4fa5e6614a8"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classExecutable.html#ac03c2ecc61c763810fb2b4fa5e6614a8">GetCodeAddr</a> () const</td></tr>
<tr class="separator:ac03c2ecc61c763810fb2b4fa5e6614a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae75ac2b5ecaeb5f38604a13b7eaf3258"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classExecutable.html#ae75ac2b5ecaeb5f38604a13b7eaf3258">GetInitDataAddr</a> () const</td></tr>
<tr class="separator:ae75ac2b5ecaeb5f38604a13b7eaf3258"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a969172e56c4c9f395442563ef5ec9b9c"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classExecutable.html#a969172e56c4c9f395442563ef5ec9b9c">GetUninitDataAddr</a> () const</td></tr>
<tr class="separator:a969172e56c4c9f395442563ef5ec9b9c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d87b53387aad4da75ea60d9ea91e053"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classExecutable.html#a9d87b53387aad4da75ea60d9ea91e053">ReadCodeBlock</a> (char *dest, uint32_t size, uint32_t offset)</td></tr>
<tr class="separator:a9d87b53387aad4da75ea60d9ea91e053"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0afdb1efd339de10d5c9806b06a4cb05"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classExecutable.html#a0afdb1efd339de10d5c9806b06a4cb05">ReadDataBlock</a> (char *dest, uint32_t size, uint32_t offset)</td></tr>
<tr class="separator:a0afdb1efd339de10d5c9806b06a4cb05"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:aa17bdcd2b19419aed206145e0f47e165"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classOpenFile.html">OpenFile</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classExecutable.html#aa17bdcd2b19419aed206145e0f47e165">file</a></td></tr>
<tr class="separator:aa17bdcd2b19419aed206145e0f47e165"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4b8d021a4d12acd855c75bdcdbcf952"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structnoffHeader.html">noffHeader</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classExecutable.html#aa4b8d021a4d12acd855c75bdcdbcf952">header</a></td></tr>
<tr class="separator:aa4b8d021a4d12acd855c75bdcdbcf952"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Assumes that the object code file is in NOFF format. </p>
<p>In order to run a user program, you must:</p>
<ol type="1">
<li>Link with the <code>-N -T 0</code> option.</li>
<li>Run <code>coff2noff</code> to convert the object file to Nachos format (Nachos object code format is essentially just a simpler version of the UNIX executable object code format).</li>
<li>Load the NOFF file into the Nachos file system (if you have not implemented the file system yet, you do not need to do this last step).</li>
</ol>
<p>Copyright (c) 2019-2021 Docentes de la Universidad Nacional de Rosario. All rights reserved. See <code><a class="el" href="copyright_8h.html">copyright.h</a></code> for copyright notice and limitation of liability and disclaimer of warranty provisions. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="ac59733f63b147936a885235300335c75"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac59733f63b147936a885235300335c75">&#9670;&nbsp;</a></span>Executable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Executable::Executable </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classOpenFile.html">OpenFile</a> *&#160;</td>
          <td class="paramname"><em>new_file</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a21ef8493196b68adbc3f5104b3ebdc4e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a21ef8493196b68adbc3f5104b3ebdc4e">&#9670;&nbsp;</a></span>CheckMagic()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Executable::CheckMagic </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Check if the executable is valid and fix endianness if necessary.</p>
<p>Check if the executable conforms to the NOFF file format by checking the magic number at the beginning of the header. Also detect if it is reversed (due to mismatching endianness) and in that case swap the entire header. </p>

</div>
</div>
<a id="ac03c2ecc61c763810fb2b4fa5e6614a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac03c2ecc61c763810fb2b4fa5e6614a8">&#9670;&nbsp;</a></span>GetCodeAddr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t Executable::GetCodeAddr </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The following methods provide addresses where each segment is meant to start. These addresses refer to main memory, not to the file. Keep in mind that when a virtual addressing mechanism is used, these addresses are to be considered virtual, not physical. </p>

</div>
</div>
<a id="afd3930591ff8d4e13ae64b15829550ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afd3930591ff8d4e13ae64b15829550ed">&#9670;&nbsp;</a></span>GetCodeSize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t Executable::GetCodeSize </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ae75ac2b5ecaeb5f38604a13b7eaf3258"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae75ac2b5ecaeb5f38604a13b7eaf3258">&#9670;&nbsp;</a></span>GetInitDataAddr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t Executable::GetInitDataAddr </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ad30aff62ce651aaa20362b508f64d700"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad30aff62ce651aaa20362b508f64d700">&#9670;&nbsp;</a></span>GetInitDataSize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t Executable::GetInitDataSize </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a8220057e1a6ec2f9f33ba6d0cbeb53b4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8220057e1a6ec2f9f33ba6d0cbeb53b4">&#9670;&nbsp;</a></span>GetSize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t Executable::GetSize </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a969172e56c4c9f395442563ef5ec9b9c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a969172e56c4c9f395442563ef5ec9b9c">&#9670;&nbsp;</a></span>GetUninitDataAddr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t Executable::GetUninitDataAddr </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a5abd3ca2cab7ce924141da77e388d43f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5abd3ca2cab7ce924141da77e388d43f">&#9670;&nbsp;</a></span>GetUninitDataSize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t Executable::GetUninitDataSize </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a9d87b53387aad4da75ea60d9ea91e053"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9d87b53387aad4da75ea60d9ea91e053">&#9670;&nbsp;</a></span>ReadCodeBlock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Executable::ReadCodeBlock </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>offset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The following methods read a block from a given program segment into memory. Reads are possible only from the code and the initialized data segments, because these are the ones that actually encode their contents in the file. The uninitialized data segment is composed of all zeroes and these are not encoded in the file.</p>
<p>Parameters:</p><ul>
<li><code>dest</code> is the start address of a memory array.</li>
<li><code>size</code> is the amount of bytes to read.</li>
<li><code>offset</code> is the relative position inside the respective segment where the start of the block is to be found. </li>
</ul>

</div>
</div>
<a id="a0afdb1efd339de10d5c9806b06a4cb05"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0afdb1efd339de10d5c9806b06a4cb05">&#9670;&nbsp;</a></span>ReadDataBlock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Executable::ReadDataBlock </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>offset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="aa17bdcd2b19419aed206145e0f47e165"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa17bdcd2b19419aed206145e0f47e165">&#9670;&nbsp;</a></span>file</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classOpenFile.html">OpenFile</a>* Executable::file</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="aa4b8d021a4d12acd855c75bdcdbcf952"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa4b8d021a4d12acd855c75bdcdbcf952">&#9670;&nbsp;</a></span>header</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structnoffHeader.html">noffHeader</a> Executable::header</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>code/userprog/<a class="el" href="executable_8hh_source.html">executable.hh</a></li>
<li>code/userprog/<a class="el" href="executable_8cc.html">executable.cc</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
