<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NachOS: Interrupt Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NachOS
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classInterrupt-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Interrupt Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="interrupt_8hh_source.html">interrupt.hh</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a736dd658be198f3dc94db0f876fb2499"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInterrupt.html#a736dd658be198f3dc94db0f876fb2499">Interrupt</a> ()</td></tr>
<tr class="memdesc:a736dd658be198f3dc94db0f876fb2499"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the interrupt simulation.  <a href="classInterrupt.html#a736dd658be198f3dc94db0f876fb2499">More...</a><br /></td></tr>
<tr class="separator:a736dd658be198f3dc94db0f876fb2499"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af33f88b80cf574d64f2fc3dae725b19b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInterrupt.html#af33f88b80cf574d64f2fc3dae725b19b">~Interrupt</a> ()</td></tr>
<tr class="memdesc:af33f88b80cf574d64f2fc3dae725b19b"><td class="mdescLeft">&#160;</td><td class="mdescRight">De-allocate data structures.  <a href="classInterrupt.html#af33f88b80cf574d64f2fc3dae725b19b">More...</a><br /></td></tr>
<tr class="separator:af33f88b80cf574d64f2fc3dae725b19b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af55a6cea64a8a3de49bad9ea3843addb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="interrupt_8hh.html#a9a61b6bd5154e67f1a6a0b1f2d4ac202">IntStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInterrupt.html#af55a6cea64a8a3de49bad9ea3843addb">SetLevel</a> (<a class="el" href="interrupt_8hh.html#a9a61b6bd5154e67f1a6a0b1f2d4ac202">IntStatus</a> <a class="el" href="classInterrupt.html#a558467f06f3d1945f63726738b93191e">level</a>)</td></tr>
<tr class="memdesc:af55a6cea64a8a3de49bad9ea3843addb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disable or enable interrupts and return previous setting.  <a href="classInterrupt.html#af55a6cea64a8a3de49bad9ea3843addb">More...</a><br /></td></tr>
<tr class="separator:af55a6cea64a8a3de49bad9ea3843addb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a16eca26a7162f7099e5b043d0c0de344"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInterrupt.html#a16eca26a7162f7099e5b043d0c0de344">Enable</a> ()</td></tr>
<tr class="memdesc:a16eca26a7162f7099e5b043d0c0de344"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable interrupts.  <a href="classInterrupt.html#a16eca26a7162f7099e5b043d0c0de344">More...</a><br /></td></tr>
<tr class="separator:a16eca26a7162f7099e5b043d0c0de344"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d9a2300f5414975c1fc52faaaa287a0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="interrupt_8hh.html#a9a61b6bd5154e67f1a6a0b1f2d4ac202">IntStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInterrupt.html#a9d9a2300f5414975c1fc52faaaa287a0">GetLevel</a> () const</td></tr>
<tr class="memdesc:a9d9a2300f5414975c1fc52faaaa287a0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return whether interrupts are enabled or disabled.  <a href="classInterrupt.html#a9d9a2300f5414975c1fc52faaaa287a0">More...</a><br /></td></tr>
<tr class="separator:a9d9a2300f5414975c1fc52faaaa287a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace54aece18806bae3614ebf9cc8c2991"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInterrupt.html#ace54aece18806bae3614ebf9cc8c2991">Idle</a> ()</td></tr>
<tr class="separator:ace54aece18806bae3614ebf9cc8c2991"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d9820efbc3e9fd82e82f2eb6ef3613b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInterrupt.html#a4d9820efbc3e9fd82e82f2eb6ef3613b">Halt</a> ()</td></tr>
<tr class="memdesc:a4d9820efbc3e9fd82e82f2eb6ef3613b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Shut down Nachos cleanly, printing out performance statistics.  <a href="classInterrupt.html#a4d9820efbc3e9fd82e82f2eb6ef3613b">More...</a><br /></td></tr>
<tr class="separator:a4d9820efbc3e9fd82e82f2eb6ef3613b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2dd7548881fde3cf3c8fba4d75437849"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInterrupt.html#a2dd7548881fde3cf3c8fba4d75437849">YieldOnReturn</a> ()</td></tr>
<tr class="separator:a2dd7548881fde3cf3c8fba4d75437849"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acbdbe3ac86352ebb370ecf2c61dcd169"><td class="memItemLeft" align="right" valign="top"><a class="el" href="interrupt_8hh.html#a5cc6b28ebc1a6f32bdfe9031c4deb568">MachineStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInterrupt.html#acbdbe3ac86352ebb370ecf2c61dcd169">GetStatus</a> () const</td></tr>
<tr class="separator:acbdbe3ac86352ebb370ecf2c61dcd169"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a513fdb23248b55eadc234b52a4f9f1b2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInterrupt.html#a513fdb23248b55eadc234b52a4f9f1b2">SetStatus</a> (<a class="el" href="interrupt_8hh.html#a5cc6b28ebc1a6f32bdfe9031c4deb568">MachineStatus</a> st)</td></tr>
<tr class="separator:a513fdb23248b55eadc234b52a4f9f1b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f9a7ddd0f250de0dcd45fa5bfd80c11"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInterrupt.html#a8f9a7ddd0f250de0dcd45fa5bfd80c11">DumpState</a> ()</td></tr>
<tr class="separator:a8f9a7ddd0f250de0dcd45fa5bfd80c11"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a790f1065049f46e7df0d655b65c2fc46"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInterrupt.html#a790f1065049f46e7df0d655b65c2fc46">Schedule</a> (<a class="el" href="utility_8hh.html#ab47fc30e09b543c1f1a5761c615f9afd">VoidFunctionPtr</a> handler, void *arg, unsigned long when, <a class="el" href="interrupt_8hh.html#ab5b2eeac230a658259cf105702f447db">IntType</a> type)</td></tr>
<tr class="separator:a790f1065049f46e7df0d655b65c2fc46"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7e385b28c374d35c4ca3763efac2b33"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInterrupt.html#af7e385b28c374d35c4ca3763efac2b33">OneTick</a> ()</td></tr>
<tr class="memdesc:af7e385b28c374d35c4ca3763efac2b33"><td class="mdescLeft">&#160;</td><td class="mdescRight">Advance simulated time.  <a href="classInterrupt.html#af7e385b28c374d35c4ca3763efac2b33">More...</a><br /></td></tr>
<tr class="separator:af7e385b28c374d35c4ca3763efac2b33"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:ab5adc6b35b5820fe525d8fcdf6229273"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInterrupt.html#ab5adc6b35b5820fe525d8fcdf6229273">CheckIfDue</a> (bool advanceClock)</td></tr>
<tr class="memdesc:ab5adc6b35b5820fe525d8fcdf6229273"><td class="mdescLeft">&#160;</td><td class="mdescRight">These functions are internal to the interrupt simulation code.  <a href="classInterrupt.html#ab5adc6b35b5820fe525d8fcdf6229273">More...</a><br /></td></tr>
<tr class="separator:ab5adc6b35b5820fe525d8fcdf6229273"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad83e8709b967745b6614ea7f75c446d7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInterrupt.html#ad83e8709b967745b6614ea7f75c446d7">ChangeLevel</a> (<a class="el" href="interrupt_8hh.html#a9a61b6bd5154e67f1a6a0b1f2d4ac202">IntStatus</a> old, <a class="el" href="interrupt_8hh.html#a9a61b6bd5154e67f1a6a0b1f2d4ac202">IntStatus</a> now)</td></tr>
<tr class="memdesc:ad83e8709b967745b6614ea7f75c446d7"><td class="mdescLeft">&#160;</td><td class="mdescRight">SetLevel, without advancing the simulated time.  <a href="classInterrupt.html#ad83e8709b967745b6614ea7f75c446d7">More...</a><br /></td></tr>
<tr class="separator:ad83e8709b967745b6614ea7f75c446d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a558467f06f3d1945f63726738b93191e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="interrupt_8hh.html#a9a61b6bd5154e67f1a6a0b1f2d4ac202">IntStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInterrupt.html#a558467f06f3d1945f63726738b93191e">level</a></td></tr>
<tr class="memdesc:a558467f06f3d1945f63726738b93191e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Are interrupts enabled or disabled?  <a href="classInterrupt.html#a558467f06f3d1945f63726738b93191e">More...</a><br /></td></tr>
<tr class="separator:a558467f06f3d1945f63726738b93191e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8dd8ebcb88a4c6e1e583458c2ea01072"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classList.html">List</a>&lt; <a class="el" href="classPendingInterrupt.html">PendingInterrupt</a> * &gt; *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInterrupt.html#a8dd8ebcb88a4c6e1e583458c2ea01072">pending</a></td></tr>
<tr class="separator:a8dd8ebcb88a4c6e1e583458c2ea01072"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ea5d05ea85a95979a51b6450433ca10"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInterrupt.html#a5ea5d05ea85a95979a51b6450433ca10">inHandler</a></td></tr>
<tr class="memdesc:a5ea5d05ea85a95979a51b6450433ca10"><td class="mdescLeft">&#160;</td><td class="mdescRight">True if we are running an interrupt handler.  <a href="classInterrupt.html#a5ea5d05ea85a95979a51b6450433ca10">More...</a><br /></td></tr>
<tr class="separator:a5ea5d05ea85a95979a51b6450433ca10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a97d372b8fa7a2061fce62068bcb053c5"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInterrupt.html#a97d372b8fa7a2061fce62068bcb053c5">yieldOnReturn</a></td></tr>
<tr class="separator:a97d372b8fa7a2061fce62068bcb053c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a270e2391b397151f55939dd57349edf9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="interrupt_8hh.html#a5cc6b28ebc1a6f32bdfe9031c4deb568">MachineStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInterrupt.html#a270e2391b397151f55939dd57349edf9">status</a></td></tr>
<tr class="memdesc:a270e2391b397151f55939dd57349edf9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Idle, kernel mode, user mode.  <a href="classInterrupt.html#a270e2391b397151f55939dd57349edf9">More...</a><br /></td></tr>
<tr class="separator:a270e2391b397151f55939dd57349edf9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The following class defines the data structures for the simulation of hardware interrupts.</p>
<p>We record whether interrupts are enabled or disabled, and any hardware interrupts that are scheduled to occur in the future. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a736dd658be198f3dc94db0f876fb2499"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a736dd658be198f3dc94db0f876fb2499">&#9670;&nbsp;</a></span>Interrupt()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Interrupt::Interrupt </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize the interrupt simulation. </p>
<p>Initialize the simulation of hardware device interrupts.</p>
<p>Interrupts start disabled, with no interrupts pending, etc. </p>

</div>
</div>
<a id="af33f88b80cf574d64f2fc3dae725b19b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af33f88b80cf574d64f2fc3dae725b19b">&#9670;&nbsp;</a></span>~Interrupt()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Interrupt::~Interrupt </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>De-allocate data structures. </p>
<p>De-allocate the data structures needed by the interrupt simulation. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ad83e8709b967745b6614ea7f75c446d7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad83e8709b967745b6614ea7f75c446d7">&#9670;&nbsp;</a></span>ChangeLevel()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Interrupt::ChangeLevel </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="interrupt_8hh.html#a9a61b6bd5154e67f1a6a0b1f2d4ac202">IntStatus</a>&#160;</td>
          <td class="paramname"><em>old</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interrupt_8hh.html#a9a61b6bd5154e67f1a6a0b1f2d4ac202">IntStatus</a>&#160;</td>
          <td class="paramname"><em>now</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>SetLevel, without advancing the simulated time. </p>
<p>Change interrupts to be enabled or disabled, without advancing the simulated time (normally, enabling interrupts advances the time).</p>
<p>Used internally.</p>
<ul>
<li><code>old</code> is the old interrupt status.</li>
<li><code>now</code> is the new interrupt status. </li>
</ul>

</div>
</div>
<a id="ab5adc6b35b5820fe525d8fcdf6229273"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab5adc6b35b5820fe525d8fcdf6229273">&#9670;&nbsp;</a></span>CheckIfDue()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Interrupt::CheckIfDue </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>advanceClock</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>These functions are internal to the interrupt simulation code. </p>
<p>Check if an interrupt is supposed to occur now.</p>
<p>Check if an interrupt is scheduled to occur, and if so, fire it off.</p>
<p>Returns true, if we fired off any interrupt handlers</p>
<ul>
<li><code>advanceClock</code> &ndash; if true, there is nothing in the ready queue, so we should simply advance the clock to when the next pending interrupt would occur (if any). If the pending interrupt is just the time-slice daemon, however, then we are done! </li>
</ul>

</div>
</div>
<a id="a8f9a7ddd0f250de0dcd45fa5bfd80c11"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8f9a7ddd0f250de0dcd45fa5bfd80c11">&#9670;&nbsp;</a></span>DumpState()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Interrupt::DumpState </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Print the complete interrupt state &ndash; the status, and all interrupts that are scheduled to occur in the future. </p>

</div>
</div>
<a id="a16eca26a7162f7099e5b043d0c0de344"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a16eca26a7162f7099e5b043d0c0de344">&#9670;&nbsp;</a></span>Enable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Interrupt::Enable </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enable interrupts. </p>
<p>Turn interrupts on. Who cares what they used to be?</p>
<p>Used in <code>ThreadRoot</code>, to turn interrupts on when first starting up a thread. </p>

</div>
</div>
<a id="a9d9a2300f5414975c1fc52faaaa287a0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9d9a2300f5414975c1fc52faaaa287a0">&#9670;&nbsp;</a></span>GetLevel()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="interrupt_8hh.html#a9a61b6bd5154e67f1a6a0b1f2d4ac202">IntStatus</a> Interrupt::GetLevel </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return whether interrupts are enabled or disabled. </p>

</div>
</div>
<a id="acbdbe3ac86352ebb370ecf2c61dcd169"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acbdbe3ac86352ebb370ecf2c61dcd169">&#9670;&nbsp;</a></span>GetStatus()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="interrupt_8hh.html#a5cc6b28ebc1a6f32bdfe9031c4deb568">MachineStatus</a> Interrupt::GetStatus </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a4d9820efbc3e9fd82e82f2eb6ef3613b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4d9820efbc3e9fd82e82f2eb6ef3613b">&#9670;&nbsp;</a></span>Halt()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Interrupt::Halt </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Shut down Nachos cleanly, printing out performance statistics. </p>

</div>
</div>
<a id="ace54aece18806bae3614ebf9cc8c2991"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ace54aece18806bae3614ebf9cc8c2991">&#9670;&nbsp;</a></span>Idle()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Interrupt::Idle </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Routine called when there is nothing in the ready queue.</p>
<p>Since something has to be running in order to put a thread on the ready queue, the only thing to do is to advance simulated time until the next scheduled hardware interrupt.</p>
<p>If there are no pending interrupts, stop. There is nothing more for us to do. </p>

</div>
</div>
<a id="af7e385b28c374d35c4ca3763efac2b33"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af7e385b28c374d35c4ca3763efac2b33">&#9670;&nbsp;</a></span>OneTick()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Interrupt::OneTick </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Advance simulated time. </p>
<p>Advance simulated time and check if there are any pending interrupts to be called.</p>
<p>Two things can cause <code>OneTick</code> to be called:</p><ul>
<li>interrupts are re-enabled;</li>
<li>a user instruction is executed. </li>
</ul>

</div>
</div>
<a id="a790f1065049f46e7df0d655b65c2fc46"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a790f1065049f46e7df0d655b65c2fc46">&#9670;&nbsp;</a></span>Schedule()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Interrupt::Schedule </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="utility_8hh.html#ab47fc30e09b543c1f1a5761c615f9afd">VoidFunctionPtr</a>&#160;</td>
          <td class="paramname"><em>handler</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>fromNow</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interrupt_8hh.html#ab5b2eeac230a658259cf105702f447db">IntType</a>&#160;</td>
          <td class="paramname"><em>type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>NOTE: the following are internal to the hardware simulation code. DO NOT call these directly. I should make them “private”, but they need to be public since they are called by the hardware device simulators. Schedule an interrupt to occur at time `&lsquo;when&rsquo;'.</p>
<p>This is called by the hardware device simulators.</p>
<p>Arrange for the CPU to be interrupted when simulated time reaches <code>now + when</code>.</p>
<p>Implementation: just put it on a sorted list.</p>
<p>NOTE: the Nachos kernel should not call this routine directly. Instead, it is only called by the hardware device simulators.</p>
<ul>
<li><code>handler</code> is the procedure to call when the interrupt occurs.</li>
<li><code>arg</code> is the argument to pass to the procedure.</li>
<li><code>fromNow</code> is how far in the future (in simulated time) the interrupt is to occur.</li>
<li><code>type</code> is the hardware device that generated the interrupt. </li>
</ul>

</div>
</div>
<a id="af55a6cea64a8a3de49bad9ea3843addb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af55a6cea64a8a3de49bad9ea3843addb">&#9670;&nbsp;</a></span>SetLevel()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="interrupt_8hh.html#a9a61b6bd5154e67f1a6a0b1f2d4ac202">IntStatus</a> Interrupt::SetLevel </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="interrupt_8hh.html#a9a61b6bd5154e67f1a6a0b1f2d4ac202">IntStatus</a>&#160;</td>
          <td class="paramname"><em>now</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Disable or enable interrupts and return previous setting. </p>
<p>Change interrupts to be enabled or disabled, and if interrupts are being enabled, advance simulated time by calling <code>OneTick</code>.</p>
<p>Returns the old interrupt status.</p>
<ul>
<li><code>now</code> is the new interrupt status. </li>
</ul>
<p><a class="el" href="classInterrupt.html">Interrupt</a> handlers are prohibited from enabling interrupts.</p>
<p>Change to new state.</p>
<p>Advance simulated time.</p>

</div>
</div>
<a id="a513fdb23248b55eadc234b52a4f9f1b2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a513fdb23248b55eadc234b52a4f9f1b2">&#9670;&nbsp;</a></span>SetStatus()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Interrupt::SetStatus </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="interrupt_8hh.html#a5cc6b28ebc1a6f32bdfe9031c4deb568">MachineStatus</a>&#160;</td>
          <td class="paramname"><em>st</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a2dd7548881fde3cf3c8fba4d75437849"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2dd7548881fde3cf3c8fba4d75437849">&#9670;&nbsp;</a></span>YieldOnReturn()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Interrupt::YieldOnReturn </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Called from within an interrupt handler, to cause a context switch (for example, on a time slice) in the interrupted thread, when the handler returns.</p>
<p>We cannot do the context switch here, because that would switch out the interrupt handler, and we want to switch out the interrupted thread. </p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a5ea5d05ea85a95979a51b6450433ca10"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5ea5d05ea85a95979a51b6450433ca10">&#9670;&nbsp;</a></span>inHandler</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Interrupt::inHandler</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>True if we are running an interrupt handler. </p>

</div>
</div>
<a id="a558467f06f3d1945f63726738b93191e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a558467f06f3d1945f63726738b93191e">&#9670;&nbsp;</a></span>level</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="interrupt_8hh.html#a9a61b6bd5154e67f1a6a0b1f2d4ac202">IntStatus</a> Interrupt::level</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Are interrupts enabled or disabled? </p>

</div>
</div>
<a id="a8dd8ebcb88a4c6e1e583458c2ea01072"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8dd8ebcb88a4c6e1e583458c2ea01072">&#9670;&nbsp;</a></span>pending</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classList.html">List</a>&lt;<a class="el" href="classPendingInterrupt.html">PendingInterrupt</a> *&gt;* Interrupt::pending</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>The list of interrupts scheduled to occur in the future. </p>

</div>
</div>
<a id="a270e2391b397151f55939dd57349edf9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a270e2391b397151f55939dd57349edf9">&#9670;&nbsp;</a></span>status</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="interrupt_8hh.html#a5cc6b28ebc1a6f32bdfe9031c4deb568">MachineStatus</a> Interrupt::status</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Idle, kernel mode, user mode. </p>

</div>
</div>
<a id="a97d372b8fa7a2061fce62068bcb053c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a97d372b8fa7a2061fce62068bcb053c5">&#9670;&nbsp;</a></span>yieldOnReturn</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Interrupt::yieldOnReturn</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>True if we are to context switch on return from the interrupt handler. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>code/machine/<a class="el" href="interrupt_8hh_source.html">interrupt.hh</a></li>
<li>code/machine/<a class="el" href="interrupt_8cc.html">interrupt.cc</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
