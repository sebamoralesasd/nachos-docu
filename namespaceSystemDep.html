<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NachOS: SystemDep Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NachOS
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">SystemDep Namespace Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>UNIX routines called by procedures in this file.  
<a href="namespaceSystemDep.html#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aaa0e0aeac4eeb54e73eb65f59a97171d"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceSystemDep.html#aaa0e0aeac4eeb54e73eb65f59a97171d">PollFile</a> (int fd)</td></tr>
<tr class="separator:aaa0e0aeac4eeb54e73eb65f59a97171d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6da6e2d14b3944b0e3455aea88bef1f1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceSystemDep.html#a6da6e2d14b3944b0e3455aea88bef1f1">OpenForWrite</a> (const char *name)</td></tr>
<tr class="separator:a6da6e2d14b3944b0e3455aea88bef1f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a87d2f2954e0c62b394d72b56e810b945"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceSystemDep.html#a87d2f2954e0c62b394d72b56e810b945">OpenForReadWrite</a> (const char *name, bool crashOnError)</td></tr>
<tr class="separator:a87d2f2954e0c62b394d72b56e810b945"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a181d73353cdd3a09ad8ebe78a7b376d9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceSystemDep.html#a181d73353cdd3a09ad8ebe78a7b376d9">Read</a> (int fd, char *buffer, size_t nBytes)</td></tr>
<tr class="separator:a181d73353cdd3a09ad8ebe78a7b376d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adafdabcc5ad5d23ec5531595839a5966"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceSystemDep.html#adafdabcc5ad5d23ec5531595839a5966">ReadPartial</a> (int fd, char *buffer, size_t nBytes)</td></tr>
<tr class="memdesc:adafdabcc5ad5d23ec5531595839a5966"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read characters from an open file, returning as many as are available.  <a href="namespaceSystemDep.html#adafdabcc5ad5d23ec5531595839a5966">More...</a><br /></td></tr>
<tr class="separator:adafdabcc5ad5d23ec5531595839a5966"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adffb8a4c2b09e33835ffb100b54e3e57"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceSystemDep.html#adffb8a4c2b09e33835ffb100b54e3e57">WriteFile</a> (int fd, const char *buffer, size_t nBytes)</td></tr>
<tr class="separator:adffb8a4c2b09e33835ffb100b54e3e57"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a98934e58888064bc110ac1bcd24092d6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceSystemDep.html#a98934e58888064bc110ac1bcd24092d6">Lseek</a> (int fd, int offset, int whence)</td></tr>
<tr class="separator:a98934e58888064bc110ac1bcd24092d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3346261de92ef7e01d90d2bf971a8fd7"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceSystemDep.html#a3346261de92ef7e01d90d2bf971a8fd7">Tell</a> (int fd)</td></tr>
<tr class="memdesc:a3346261de92ef7e01d90d2bf971a8fd7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Report the current location within an open file.  <a href="namespaceSystemDep.html#a3346261de92ef7e01d90d2bf971a8fd7">More...</a><br /></td></tr>
<tr class="separator:a3346261de92ef7e01d90d2bf971a8fd7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2aef72ef0cf1cd47bb9c31679ee2f808"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceSystemDep.html#a2aef72ef0cf1cd47bb9c31679ee2f808">Close</a> (int fd)</td></tr>
<tr class="separator:a2aef72ef0cf1cd47bb9c31679ee2f808"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2f13d0144099415d3d2f542c54f2156"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceSystemDep.html#ad2f13d0144099415d3d2f542c54f2156">Unlink</a> (const char *name)</td></tr>
<tr class="memdesc:ad2f13d0144099415d3d2f542c54f2156"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete a file.  <a href="namespaceSystemDep.html#ad2f13d0144099415d3d2f542c54f2156">More...</a><br /></td></tr>
<tr class="separator:ad2f13d0144099415d3d2f542c54f2156"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a11fc25179796af6b7c299efe13bb068a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceSystemDep.html#a11fc25179796af6b7c299efe13bb068a">OpenSocket</a> ()</td></tr>
<tr class="memdesc:a11fc25179796af6b7c299efe13bb068a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Interprocess communication operations, for simulating the network.  <a href="namespaceSystemDep.html#a11fc25179796af6b7c299efe13bb068a">More...</a><br /></td></tr>
<tr class="separator:a11fc25179796af6b7c299efe13bb068a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a84dd61be0d1cd371ca69b14d3363a3e5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceSystemDep.html#a84dd61be0d1cd371ca69b14d3363a3e5">CloseSocket</a> (int sockID)</td></tr>
<tr class="memdesc:a84dd61be0d1cd371ca69b14d3363a3e5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Close the IPC connection.  <a href="namespaceSystemDep.html#a84dd61be0d1cd371ca69b14d3363a3e5">More...</a><br /></td></tr>
<tr class="separator:a84dd61be0d1cd371ca69b14d3363a3e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa25cb38e4edb108a78ee5f73af774c1"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceSystemDep.html#afa25cb38e4edb108a78ee5f73af774c1">InitSocketName</a> (struct sockaddr_un *uname, const char *name)</td></tr>
<tr class="memdesc:afa25cb38e4edb108a78ee5f73af774c1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize a UNIX socket address &ndash; magical!  <a href="namespaceSystemDep.html#afa25cb38e4edb108a78ee5f73af774c1">More...</a><br /></td></tr>
<tr class="separator:afa25cb38e4edb108a78ee5f73af774c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f74dab023126a208fc3da59f89672ac"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceSystemDep.html#a8f74dab023126a208fc3da59f89672ac">AssignNameToSocket</a> (const char *socketName, int sockID)</td></tr>
<tr class="separator:a8f74dab023126a208fc3da59f89672ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2bd82afcb93012ef256f322738597202"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceSystemDep.html#a2bd82afcb93012ef256f322738597202">DeAssignNameToSocket</a> (const char *socketName)</td></tr>
<tr class="memdesc:a2bd82afcb93012ef256f322738597202"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete the UNIX file name we assigned to our IPC port, on cleanup.  <a href="namespaceSystemDep.html#a2bd82afcb93012ef256f322738597202">More...</a><br /></td></tr>
<tr class="separator:a2bd82afcb93012ef256f322738597202"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a71aeb1064b312bfc2b25543680fcf2"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceSystemDep.html#a9a71aeb1064b312bfc2b25543680fcf2">PollSocket</a> (int sockID)</td></tr>
<tr class="memdesc:a9a71aeb1064b312bfc2b25543680fcf2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return true if there are any messages waiting to arrive on the IPC port.  <a href="namespaceSystemDep.html#a9a71aeb1064b312bfc2b25543680fcf2">More...</a><br /></td></tr>
<tr class="separator:a9a71aeb1064b312bfc2b25543680fcf2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fdc20778054609a520356f9e90cbc68"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceSystemDep.html#a4fdc20778054609a520356f9e90cbc68">ReadFromSocket</a> (int sockID, char *buffer, size_t packetSize)</td></tr>
<tr class="separator:a4fdc20778054609a520356f9e90cbc68"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a8a51ff376a259a05bbcff71e704142"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceSystemDep.html#a1a8a51ff376a259a05bbcff71e704142">SendToSocket</a> (int sockID, const char *buffer, size_t packetSize, const char *toName)</td></tr>
<tr class="separator:a1a8a51ff376a259a05bbcff71e704142"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f97830f7f7b8273c50fc65933cf00f6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceSystemDep.html#a1f97830f7f7b8273c50fc65933cf00f6">CallOnUserAbort</a> (<a class="el" href="utility_8hh.html#a9c6f12cbff87535a17c52ca7d975f2a5">VoidNoArgFunctionPtr</a> func)</td></tr>
<tr class="separator:a1f97830f7f7b8273c50fc65933cf00f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa247109ad47f51e4a7fdbfea0cbffc48"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceSystemDep.html#aa247109ad47f51e4a7fdbfea0cbffc48">Delay</a> (unsigned seconds)</td></tr>
<tr class="memdesc:aa247109ad47f51e4a7fdbfea0cbffc48"><td class="mdescLeft">&#160;</td><td class="mdescRight">Process control: <code>sleep</code>.  <a href="namespaceSystemDep.html#aa247109ad47f51e4a7fdbfea0cbffc48">More...</a><br /></td></tr>
<tr class="separator:aa247109ad47f51e4a7fdbfea0cbffc48"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af3d33ed71e50bffb18079484f9244262"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceSystemDep.html#af3d33ed71e50bffb18079484f9244262">RandomInit</a> (unsigned seed)</td></tr>
<tr class="memdesc:af3d33ed71e50bffb18079484f9244262"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the pseudo random number generator.  <a href="namespaceSystemDep.html#af3d33ed71e50bffb18079484f9244262">More...</a><br /></td></tr>
<tr class="separator:af3d33ed71e50bffb18079484f9244262"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a64bc8e52086c7053a1649f9e679e11"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceSystemDep.html#a3a64bc8e52086c7053a1649f9e679e11">Random</a> ()</td></tr>
<tr class="memdesc:a3a64bc8e52086c7053a1649f9e679e11"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return a pseudo-random number.  <a href="namespaceSystemDep.html#a3a64bc8e52086c7053a1649f9e679e11">More...</a><br /></td></tr>
<tr class="separator:a3a64bc8e52086c7053a1649f9e679e11"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a718b4781e89094eae9333f6632b729bd"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceSystemDep.html#a718b4781e89094eae9333f6632b729bd">AllocBoundedArray</a> (unsigned size)</td></tr>
<tr class="separator:a718b4781e89094eae9333f6632b729bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a231446a6d9e4f6727fdfc1debf55a0e1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceSystemDep.html#a231446a6d9e4f6727fdfc1debf55a0e1">DeallocBoundedArray</a> (const char *ptr, unsigned size)</td></tr>
<tr class="separator:a231446a6d9e4f6727fdfc1debf55a0e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>UNIX routines called by procedures in this file. </p>
<p>Implementation of system-dependent interface. Nachos uses the routines defined here, rather than directly calling the UNIX library, to simplify porting between versions of UNIX, and even to other systems, such as MSDOS.</p>
<p>On UNIX, almost all of these routines are simple wrappers for the underlying UNIX system calls.</p>
<p>NOTE: all of these routines refer to operations on the underlying host machine (e.g., the DECstation, SPARC, etc.), supporting the Nachos simulation code. Nachos implements similar operations, (such as opening a file), but those are implemented in terms of hardware devices, which are simulated by calls to the underlying routines in the host workstation OS.</p>
<p>This file includes lots of calls to C routines. C++ requires us to wrap all C definitions with a "extern "C" block". This prevents the internal forms of the names from being changed by the C++ compiler.</p>
<p>Copyright (c) 1992-1993 The Regents of the University of California. 2016-2021 Docentes de la Universidad Nacional de Rosario. All rights reserved. See <code><a class="el" href="copyright_8h.html">copyright.h</a></code> for copyright notice and limitation of liability and disclaimer of warranty provisions.</p>
<p>System-dependent interface.</p>
<p>Nachos uses the routines defined here, rather than directly calling the UNIX library functions, to simplify porting between versions of UNIX, and even to other systems, such as MSDOS and the Macintosh.</p>
<p>Copyright (c) 1992-1993 The Regents of the University of California. 2016-2021 Docentes de la Universidad Nacional de Rosario. All rights reserved. See <code><a class="el" href="copyright_8h.html">copyright.h</a></code> for copyright notice and limitation of liability and disclaimer of warranty provisions. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a718b4781e89094eae9333f6632b729bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a718b4781e89094eae9333f6632b729bd">&#9670;&nbsp;</a></span>AllocBoundedArray()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char * SystemDep::AllocBoundedArray </td>
          <td>(</td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>size</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return an array, with the two pages just before and after the array unmapped, to catch illegal references off the end of the array. Particularly useful for catching overflow beyond fixed-size thread execution stacks.</p>
<p>Note: Just return the useful part!</p>
<ul>
<li><code>size</code> &ndash; amount of useful space needed (in bytes).</li>
</ul>
<p>Allocate, de-allocate an array, such that de-referencing just beyond either end of the array will cause an error. </p>

</div>
</div>
<a id="a8f74dab023126a208fc3da59f89672ac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8f74dab023126a208fc3da59f89672ac">&#9670;&nbsp;</a></span>AssignNameToSocket()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SystemDep::AssignNameToSocket </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>socketName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sockID</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Give a UNIX file name to the IPC port, so other instances of Nachos can locate the port. </p>

</div>
</div>
<a id="a1f97830f7f7b8273c50fc65933cf00f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1f97830f7f7b8273c50fc65933cf00f6">&#9670;&nbsp;</a></span>CallOnUserAbort()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SystemDep::CallOnUserAbort </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="utility_8hh.html#a9c6f12cbff87535a17c52ca7d975f2a5">VoidNoArgFunctionPtr</a>&#160;</td>
          <td class="paramname"><em>func</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Arrange that <code>func</code> will be called when the user aborts (e.g., by hitting ctl-C).</p>
<p>Initialize system so that <code>cleanUp</code> routine is called when user hits Ctrl-C. </p>

</div>
</div>
<a id="a2aef72ef0cf1cd47bb9c31679ee2f808"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2aef72ef0cf1cd47bb9c31679ee2f808">&#9670;&nbsp;</a></span>Close()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SystemDep::Close </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Close a file.</p>
<p>Abort on error. </p>

</div>
</div>
<a id="a84dd61be0d1cd371ca69b14d3363a3e5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a84dd61be0d1cd371ca69b14d3363a3e5">&#9670;&nbsp;</a></span>CloseSocket()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SystemDep::CloseSocket </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sockID</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Close the IPC connection. </p>

</div>
</div>
<a id="a231446a6d9e4f6727fdfc1debf55a0e1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a231446a6d9e4f6727fdfc1debf55a0e1">&#9670;&nbsp;</a></span>DeallocBoundedArray()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SystemDep::DeallocBoundedArray </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Deallocate an array of integers, unprotecting its two boundary pages.</p>
<ul>
<li><code>ptr</code> is the array to be deallocated.</li>
<li><code>size</code> is the amount of useful space in the array (in bytes). </li>
</ul>

</div>
</div>
<a id="a2bd82afcb93012ef256f322738597202"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2bd82afcb93012ef256f322738597202">&#9670;&nbsp;</a></span>DeAssignNameToSocket()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SystemDep::DeAssignNameToSocket </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>socketName</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Delete the UNIX file name we assigned to our IPC port, on cleanup. </p>

</div>
</div>
<a id="aa247109ad47f51e4a7fdbfea0cbffc48"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa247109ad47f51e4a7fdbfea0cbffc48">&#9670;&nbsp;</a></span>Delay()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SystemDep::Delay </td>
          <td>(</td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>seconds</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Process control: <code>sleep</code>. </p>
<p>Put the UNIX process running Nachos to sleep for <code>seconds</code> seconds, to give the user time to start up another invocation of Nachos in a different UNIX shell. </p>

</div>
</div>
<a id="afa25cb38e4edb108a78ee5f73af774c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afa25cb38e4edb108a78ee5f73af774c1">&#9670;&nbsp;</a></span>InitSocketName()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void SystemDep::InitSocketName </td>
          <td>(</td>
          <td class="paramtype">struct sockaddr_un *&#160;</td>
          <td class="paramname"><em>uname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initialize a UNIX socket address &ndash; magical! </p>

</div>
</div>
<a id="a98934e58888064bc110ac1bcd24092d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a98934e58888064bc110ac1bcd24092d6">&#9670;&nbsp;</a></span>Lseek()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SystemDep::Lseek </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>whence</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Change the location within an open file.</p>
<p>Abort on error. </p>

</div>
</div>
<a id="a87d2f2954e0c62b394d72b56e810b945"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a87d2f2954e0c62b394d72b56e810b945">&#9670;&nbsp;</a></span>OpenForReadWrite()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int SystemDep::OpenForReadWrite </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>crashOnError</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Open a file for reading or writing.</p>
<p>Return the file descriptor, or error if it does not exist.</p>
<ul>
<li><code>name</code> is the file name. </li>
</ul>

</div>
</div>
<a id="a6da6e2d14b3944b0e3455aea88bef1f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6da6e2d14b3944b0e3455aea88bef1f1">&#9670;&nbsp;</a></span>OpenForWrite()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int SystemDep::OpenForWrite </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Open a file for writing.</p>
<p>Create it if it does not exist; truncate it if it does already exist. Return the file descriptor.</p>
<ul>
<li><code>name</code> is the file name.</li>
</ul>
<p>File operations: <code>open</code>/<code>read</code>/<code>write</code>/<code>lseek</code>/<code>close</code>, and check for error.</p>
<p>For simulating the disk and the console devices. </p>

</div>
</div>
<a id="a11fc25179796af6b7c299efe13bb068a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a11fc25179796af6b7c299efe13bb068a">&#9670;&nbsp;</a></span>OpenSocket()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int SystemDep::OpenSocket </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Interprocess communication operations, for simulating the network. </p>
<p>Open an interprocess communication (IPC) connection.</p>
<p>For now, just open a datagram port where other Nachos (simulating workstations on a network) can send messages to this Nachos. </p>

</div>
</div>
<a id="aaa0e0aeac4eeb54e73eb65f59a97171d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa0e0aeac4eeb54e73eb65f59a97171d">&#9670;&nbsp;</a></span>PollFile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool SystemDep::PollFile </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Check open file or open socket to see if there are any characters that can be read immediately. If so, read them in, and return TRUE.</p>
<p>In the network case, if there are no threads for us to run, and no characters to be read, we need to give the other side a chance to get our host's CPU (otherwise, we will go really slowly, since UNIX time-slices infrequently, and this would be like busy-waiting). So we delay for a short fixed time, before allowing ourselves to be re-scheduled (sort of like a Yield, but cast in terms of UNIX).</p>
<p>"fd" &ndash; the file descriptor of the file to be polled</p>
<p>Check file to see if there are any characters to be read.</p>
<p>If no characters in the file, return without waiting. </p>

</div>
</div>
<a id="a9a71aeb1064b312bfc2b25543680fcf2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9a71aeb1064b312bfc2b25543680fcf2">&#9670;&nbsp;</a></span>PollSocket()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool SystemDep::PollSocket </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sockID</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return true if there are any messages waiting to arrive on the IPC port. </p>

</div>
</div>
<a id="a3a64bc8e52086c7053a1649f9e679e11"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3a64bc8e52086c7053a1649f9e679e11">&#9670;&nbsp;</a></span>Random()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int SystemDep::Random </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return a pseudo-random number. </p>

</div>
</div>
<a id="af3d33ed71e50bffb18079484f9244262"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af3d33ed71e50bffb18079484f9244262">&#9670;&nbsp;</a></span>RandomInit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SystemDep::RandomInit </td>
          <td>(</td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>seed</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize the pseudo random number generator. </p>
<p>Initialize the pseudo-random number generator.</p>
<p>We use the now obsolete <code>srand</code> and <code>rand</code> because they are more portable! </p>

</div>
</div>
<a id="a181d73353cdd3a09ad8ebe78a7b376d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a181d73353cdd3a09ad8ebe78a7b376d9">&#9670;&nbsp;</a></span>Read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SystemDep::Read </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>nBytes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Read characters from an open file.</p>
<p>Abort if read fails. </p>

</div>
</div>
<a id="a4fdc20778054609a520356f9e90cbc68"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4fdc20778054609a520356f9e90cbc68">&#9670;&nbsp;</a></span>ReadFromSocket()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SystemDep::ReadFromSocket </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sockID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>packetSize</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Read a fixed size packet off the IPC port.</p>
<p>Abort on error. </p>

</div>
</div>
<a id="adafdabcc5ad5d23ec5531595839a5966"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adafdabcc5ad5d23ec5531595839a5966">&#9670;&nbsp;</a></span>ReadPartial()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int SystemDep::ReadPartial </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>nBytes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read characters from an open file, returning as many as are available. </p>

</div>
</div>
<a id="a1a8a51ff376a259a05bbcff71e704142"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1a8a51ff376a259a05bbcff71e704142">&#9670;&nbsp;</a></span>SendToSocket()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SystemDep::SendToSocket </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sockID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>packetSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>toName</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Transmit a fixed size packet to another Nachos' IPC port.</p>
<p>Abort on error. </p>

</div>
</div>
<a id="a3346261de92ef7e01d90d2bf971a8fd7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3346261de92ef7e01d90d2bf971a8fd7">&#9670;&nbsp;</a></span>Tell()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int SystemDep::Tell </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Report the current location within an open file. </p>

</div>
</div>
<a id="ad2f13d0144099415d3d2f542c54f2156"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad2f13d0144099415d3d2f542c54f2156">&#9670;&nbsp;</a></span>Unlink()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool SystemDep::Unlink </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Delete a file. </p>

</div>
</div>
<a id="adffb8a4c2b09e33835ffb100b54e3e57"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adffb8a4c2b09e33835ffb100b54e3e57">&#9670;&nbsp;</a></span>WriteFile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SystemDep::WriteFile </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>nBytes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Write characters to an open file.</p>
<p>Abort if write fails. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
