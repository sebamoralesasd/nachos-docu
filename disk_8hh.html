<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NachOS: code/machine/disk.hh File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NachOS
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_050edd66366d13764f98250ef6db77f6.html">code</a></li><li class="navelem"><a class="el" href="dir_c6faf5bb1a362c64e2b4a502a2d69864.html">machine</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">disk.hh File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="utility_8hh_source.html">lib/utility.hh</a>&quot;</code><br />
</div>
<p><a href="disk_8hh_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDisk.html">Disk</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a17db39e699e974bf89a423dd41b7cbbd"><td class="memItemLeft" align="right" valign="top">const unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="disk_8hh.html#a17db39e699e974bf89a423dd41b7cbbd">SECTOR_SIZE</a> = 128</td></tr>
<tr class="memdesc:a17db39e699e974bf89a423dd41b7cbbd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of bytes per disk sector.  <a href="disk_8hh.html#a17db39e699e974bf89a423dd41b7cbbd">More...</a><br /></td></tr>
<tr class="separator:a17db39e699e974bf89a423dd41b7cbbd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1738b9058bcc85ad2fa033c46897f08f"><td class="memItemLeft" align="right" valign="top">const unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="disk_8hh.html#a1738b9058bcc85ad2fa033c46897f08f">SECTORS_PER_TRACK</a> = 32</td></tr>
<tr class="separator:a1738b9058bcc85ad2fa033c46897f08f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a58f5f6803843e16a8b02ba7bc29214ba"><td class="memItemLeft" align="right" valign="top">const unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="disk_8hh.html#a58f5f6803843e16a8b02ba7bc29214ba">NUM_TRACKS</a> = 32</td></tr>
<tr class="memdesc:a58f5f6803843e16a8b02ba7bc29214ba"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of tracks per disk.  <a href="disk_8hh.html#a58f5f6803843e16a8b02ba7bc29214ba">More...</a><br /></td></tr>
<tr class="separator:a58f5f6803843e16a8b02ba7bc29214ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f630f888cd789c1143ca8ccfa48460e"><td class="memItemLeft" align="right" valign="top">const unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="disk_8hh.html#a5f630f888cd789c1143ca8ccfa48460e">NUM_SECTORS</a> = <a class="el" href="disk_8hh.html#a1738b9058bcc85ad2fa033c46897f08f">SECTORS_PER_TRACK</a> * <a class="el" href="disk_8hh.html#a58f5f6803843e16a8b02ba7bc29214ba">NUM_TRACKS</a></td></tr>
<tr class="memdesc:a5f630f888cd789c1143ca8ccfa48460e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Total # of sectors per disk.  <a href="disk_8hh.html#a5f630f888cd789c1143ca8ccfa48460e">More...</a><br /></td></tr>
<tr class="separator:a5f630f888cd789c1143ca8ccfa48460e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e5d67a58fafe95df77e2121e793faa0"><td class="memItemLeft" align="right" valign="top">static const unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="disk_8hh.html#a0e5d67a58fafe95df77e2121e793faa0">MAGIC_NUMBER</a> = 0x456789AB</td></tr>
<tr class="separator:a0e5d67a58fafe95df77e2121e793faa0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef2da5ae76d1bfb1fc566447f27eaf55"><td class="memItemLeft" align="right" valign="top">static const unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="disk_8hh.html#aef2da5ae76d1bfb1fc566447f27eaf55">MAGIC_SIZE</a> = sizeof (int)</td></tr>
<tr class="separator:aef2da5ae76d1bfb1fc566447f27eaf55"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a986739387a7bd7ce9ab9335ac8e60d74"><td class="memItemLeft" align="right" valign="top">static const unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="disk_8hh.html#a986739387a7bd7ce9ab9335ac8e60d74">DISK_SIZE</a> = <a class="el" href="disk_8hh.html#aef2da5ae76d1bfb1fc566447f27eaf55">MAGIC_SIZE</a> + <a class="el" href="disk_8hh.html#a5f630f888cd789c1143ca8ccfa48460e">NUM_SECTORS</a> * <a class="el" href="disk_8hh.html#a17db39e699e974bf89a423dd41b7cbbd">SECTOR_SIZE</a></td></tr>
<tr class="separator:a986739387a7bd7ce9ab9335ac8e60d74"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a986739387a7bd7ce9ab9335ac8e60d74"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a986739387a7bd7ce9ab9335ac8e60d74">&#9670;&nbsp;</a></span>DISK_SIZE</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const unsigned DISK_SIZE = <a class="el" href="disk_8hh.html#aef2da5ae76d1bfb1fc566447f27eaf55">MAGIC_SIZE</a> + <a class="el" href="disk_8hh.html#a5f630f888cd789c1143ca8ccfa48460e">NUM_SECTORS</a> * <a class="el" href="disk_8hh.html#a17db39e699e974bf89a423dd41b7cbbd">SECTOR_SIZE</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a0e5d67a58fafe95df77e2121e793faa0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0e5d67a58fafe95df77e2121e793faa0">&#9670;&nbsp;</a></span>MAGIC_NUMBER</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const unsigned MAGIC_NUMBER = 0x456789AB</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>We put this at the front of the UNIX file representing the disk, to make it less likely we will accidentally treat a useful file as a disk (which would probably trash the file's contents). </p>

</div>
</div>
<a id="aef2da5ae76d1bfb1fc566447f27eaf55"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aef2da5ae76d1bfb1fc566447f27eaf55">&#9670;&nbsp;</a></span>MAGIC_SIZE</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const unsigned MAGIC_SIZE = sizeof (int)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a5f630f888cd789c1143ca8ccfa48460e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5f630f888cd789c1143ca8ccfa48460e">&#9670;&nbsp;</a></span>NUM_SECTORS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const unsigned NUM_SECTORS = <a class="el" href="disk_8hh.html#a1738b9058bcc85ad2fa033c46897f08f">SECTORS_PER_TRACK</a> * <a class="el" href="disk_8hh.html#a58f5f6803843e16a8b02ba7bc29214ba">NUM_TRACKS</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Total # of sectors per disk. </p>

</div>
</div>
<a id="a58f5f6803843e16a8b02ba7bc29214ba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a58f5f6803843e16a8b02ba7bc29214ba">&#9670;&nbsp;</a></span>NUM_TRACKS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const unsigned NUM_TRACKS = 32</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Number of tracks per disk. </p>

</div>
</div>
<a id="a17db39e699e974bf89a423dd41b7cbbd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a17db39e699e974bf89a423dd41b7cbbd">&#9670;&nbsp;</a></span>SECTOR_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const unsigned SECTOR_SIZE = 128</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Number of bytes per disk sector. </p>
<p>Data structures to emulate a physical disk.</p>
<p>A physical disk can accept (one at a time) requests to read/write a disk sector; when the request is satisfied, the CPU gets an interrupt, and the next request can be sent to the disk.</p>
<p><a class="el" href="classDisk.html">Disk</a> contents are preserved across machine crashes, but if a file system operation (eg, create a file) is in progress when the system shuts down, the file system may be corrupted.</p>
<p>DO NOT CHANGE &ndash; part of the machine emulation</p>
<p>Copyright (c) 1992-1993 The Regents of the University of California. 2016-2021 Docentes de la Universidad Nacional de Rosario. All rights reserved. See <code><a class="el" href="copyright_8h.html">copyright.h</a></code> for copyright notice and limitation of liability and disclaimer of warranty provisions. The following class defines a physical disk I/O device.</p>
<p>The disk has a single surface, split up into “tracks”, and each track split up into "sectors" (the same number of sectors on each track, and each sector has the same number of bytes of storage).</p>
<p>Addressing is by sector number &ndash; each sector on the disk is given a unique number: <code>track * SECTORS_PER_TRACK + offset</code> within a track.</p>
<p>As with other I/O devices, the raw physical disk is an asynchronous device &ndash; requests to read or write portions of the disk return immediately, and an interrupt is invoked later to signal that the operation completed.</p>
<p>The physical disk is in fact simulated via operations on a UNIX file.</p>
<p>To make life a little more realistic, the simulated time for each operation reflects a “track buffer” &ndash; RAM to store the contents of the current track as the disk head passes by. The idea is that the disk always transfers to the track buffer, in case that data is requested later on. This has the benefit of eliminating the need for "skip-sector" scheduling &ndash; a read request which comes in shortly after the head has passed the beginning of the sector can be satisfied more quickly, because its contents are in the track buffer. Most disks these days now come with a track buffer.</p>
<p>The track buffer simulation can be disabled by compiling with <code>-DNOTRACKBUF</code>. </p>

</div>
</div>
<a id="a1738b9058bcc85ad2fa033c46897f08f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1738b9058bcc85ad2fa033c46897f08f">&#9670;&nbsp;</a></span>SECTORS_PER_TRACK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const unsigned SECTORS_PER_TRACK = 32</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Number of sectors per disk track. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
