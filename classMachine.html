<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NachOS: Machine Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NachOS
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classMachine-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Machine Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="machine_8hh_source.html">machine.hh</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:af6543be53421fad8ecce96e32e63528f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMachine.html#af6543be53421fad8ecce96e32e63528f">Machine</a> (<a class="el" href="classSingleStepper.html">SingleStepper</a> *st)</td></tr>
<tr class="memdesc:af6543be53421fad8ecce96e32e63528f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the simulation of the hardware for running user programs.  <a href="classMachine.html#af6543be53421fad8ecce96e32e63528f">More...</a><br /></td></tr>
<tr class="separator:af6543be53421fad8ecce96e32e63528f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a83444e06eb7a7c163a1b9c87a7062d43"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMachine.html#a83444e06eb7a7c163a1b9c87a7062d43">Run</a> ()</td></tr>
<tr class="memdesc:a83444e06eb7a7c163a1b9c87a7062d43"><td class="mdescLeft">&#160;</td><td class="mdescRight">Routines callable by the Nachos kernel.  <a href="classMachine.html#a83444e06eb7a7c163a1b9c87a7062d43">More...</a><br /></td></tr>
<tr class="separator:a83444e06eb7a7c163a1b9c87a7062d43"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac0edcafa62d3c8cf1faa8acc02f23eb2"><td class="memItemLeft" align="right" valign="top">const int *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMachine.html#ac0edcafa62d3c8cf1faa8acc02f23eb2">GetRegisters</a> () const</td></tr>
<tr class="separator:ac0edcafa62d3c8cf1faa8acc02f23eb2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4dbd6351c4a55955da985a5ea28d7fa2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classMMU.html">MMU</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMachine.html#a4dbd6351c4a55955da985a5ea28d7fa2">GetMMU</a> ()</td></tr>
<tr class="separator:a4dbd6351c4a55955da985a5ea28d7fa2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a46d88d5730e9da23cff9993011ce562c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMachine.html#a46d88d5730e9da23cff9993011ce562c">ReadRegister</a> (unsigned num) const</td></tr>
<tr class="memdesc:a46d88d5730e9da23cff9993011ce562c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read the contents of a CPU register.  <a href="classMachine.html#a46d88d5730e9da23cff9993011ce562c">More...</a><br /></td></tr>
<tr class="separator:a46d88d5730e9da23cff9993011ce562c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aecda41e584e2dedd77d162304eb54723"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMachine.html#aecda41e584e2dedd77d162304eb54723">WriteRegister</a> (unsigned num, int value)</td></tr>
<tr class="memdesc:aecda41e584e2dedd77d162304eb54723"><td class="mdescLeft">&#160;</td><td class="mdescRight">Store a value into a CPU register.  <a href="classMachine.html#aecda41e584e2dedd77d162304eb54723">More...</a><br /></td></tr>
<tr class="separator:aecda41e584e2dedd77d162304eb54723"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8852a4e40841bc084edec1e198ff9b5c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMachine.html#a8852a4e40841bc084edec1e198ff9b5c">ReadMem</a> (unsigned addr, unsigned size, int *value)</td></tr>
<tr class="separator:a8852a4e40841bc084edec1e198ff9b5c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4de45aa839be2dc88f032a6353c73b98"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMachine.html#a4de45aa839be2dc88f032a6353c73b98">WriteMem</a> (unsigned addr, unsigned size, int value)</td></tr>
<tr class="separator:a4de45aa839be2dc88f032a6353c73b98"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e4dee4ed66da41de9bbebb161efd06f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMachine.html#a4e4dee4ed66da41de9bbebb161efd06f">DumpState</a> ()</td></tr>
<tr class="memdesc:a4e4dee4ed66da41de9bbebb161efd06f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Print the user CPU and memory state.  <a href="classMachine.html#a4e4dee4ed66da41de9bbebb161efd06f">More...</a><br /></td></tr>
<tr class="separator:a4e4dee4ed66da41de9bbebb161efd06f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a044ebcc05c8ff8f1e65f9c119d7de5e6"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMachine.html#a044ebcc05c8ff8f1e65f9c119d7de5e6">FetchInstruction</a> (<a class="el" href="classInstruction.html">Instruction</a> *instr)</td></tr>
<tr class="memdesc:a044ebcc05c8ff8f1e65f9c119d7de5e6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Routines internal to the machine simulation &ndash; DO NOT call these.  <a href="classMachine.html#a044ebcc05c8ff8f1e65f9c119d7de5e6">More...</a><br /></td></tr>
<tr class="separator:a044ebcc05c8ff8f1e65f9c119d7de5e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c809e0409d65e966ded14d46a9b3d5f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMachine.html#a4c809e0409d65e966ded14d46a9b3d5f">ExecInstruction</a> (const <a class="el" href="classInstruction.html">Instruction</a> *instr)</td></tr>
<tr class="memdesc:a4c809e0409d65e966ded14d46a9b3d5f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Run a certain instruction of a user program.  <a href="classMachine.html#a4c809e0409d65e966ded14d46a9b3d5f">More...</a><br /></td></tr>
<tr class="separator:a4c809e0409d65e966ded14d46a9b3d5f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5de41e68ec14b975e152d963a557ce7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMachine.html#ae5de41e68ec14b975e152d963a557ce7">DelayedLoad</a> (unsigned nextReg, int nextVal)</td></tr>
<tr class="memdesc:ae5de41e68ec14b975e152d963a557ce7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Do a pending delayed load (modifying a reg).  <a href="classMachine.html#ae5de41e68ec14b975e152d963a557ce7">More...</a><br /></td></tr>
<tr class="separator:ae5de41e68ec14b975e152d963a557ce7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73f0ad9597d4a12783e2ae8bb0ec9bcf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMachine.html#a73f0ad9597d4a12783e2ae8bb0ec9bcf">RaiseException</a> (<a class="el" href="exception__type_8hh.html#a0e0f0f1661d7aeb71ed9698bff6c6383">ExceptionType</a> et, unsigned badVAddr)</td></tr>
<tr class="separator:a73f0ad9597d4a12783e2ae8bb0ec9bcf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a64c163986d58f1fe6a85524ed9185f28"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMachine.html#a64c163986d58f1fe6a85524ed9185f28">SetHandler</a> (<a class="el" href="exception__type_8hh.html#a0e0f0f1661d7aeb71ed9698bff6c6383">ExceptionType</a> et, <a class="el" href="machine_8hh.html#afcd896951d835dc9bcd77ad8396f6c5e">ExceptionHandler</a> handler)</td></tr>
<tr class="separator:a64c163986d58f1fe6a85524ed9185f28"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a936fbc06813c81a9db50e716eb3375d1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classSingleStepper.html">SingleStepper</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMachine.html#a936fbc06813c81a9db50e716eb3375d1">singleStepper</a></td></tr>
<tr class="separator:a936fbc06813c81a9db50e716eb3375d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4dc9471bcc258a7a53dcc7882a82f5a7"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMachine.html#a4dc9471bcc258a7a53dcc7882a82f5a7">registers</a> [<a class="el" href="machine_8hh.html#abc6126af1d45847bc59afa0aa3216b04a06332796405f8d377bb2cffb4f4c74ba">NUM_TOTAL_REGS</a>]</td></tr>
<tr class="memdesc:a4dc9471bcc258a7a53dcc7882a82f5a7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Private data structures.  <a href="classMachine.html#a4dc9471bcc258a7a53dcc7882a82f5a7">More...</a><br /></td></tr>
<tr class="separator:a4dc9471bcc258a7a53dcc7882a82f5a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e4e41fcb726e843a34280b51bdd3e8d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classMMU.html">MMU</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMachine.html#a5e4e41fcb726e843a34280b51bdd3e8d">mmu</a></td></tr>
<tr class="memdesc:a5e4e41fcb726e843a34280b51bdd3e8d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Memory management unit.  <a href="classMachine.html#a5e4e41fcb726e843a34280b51bdd3e8d">More...</a><br /></td></tr>
<tr class="separator:a5e4e41fcb726e843a34280b51bdd3e8d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7bf5fc69695180a7755f5d0428008528"><td class="memItemLeft" align="right" valign="top"><a class="el" href="machine_8hh.html#afcd896951d835dc9bcd77ad8396f6c5e">ExceptionHandler</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMachine.html#a7bf5fc69695180a7755f5d0428008528">handlers</a> [<a class="el" href="exception__type_8hh.html#a0e0f0f1661d7aeb71ed9698bff6c6383a83e7a5ff1701f68a8ca17dad10f8f8d2">NUM_EXCEPTION_TYPES</a>]</td></tr>
<tr class="memdesc:a7bf5fc69695180a7755f5d0428008528"><td class="mdescLeft">&#160;</td><td class="mdescRight">Exception handlers.  <a href="classMachine.html#a7bf5fc69695180a7755f5d0428008528">More...</a><br /></td></tr>
<tr class="separator:a7bf5fc69695180a7755f5d0428008528"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The following class defines the simulated host workstation hardware, as seen by user programs &ndash; the CPU registers, main memory, etc.</p>
<p>User programs should not be able to tell that they are running on our simulator or on the real hardware, except:</p><ul>
<li>we do not support floating point instructions;</li>
<li>the system call interface to Nachos is not the same as UNIX (10 system calls in Nachos vs. 200 in UNIX!). If we were to implement more of the UNIX system calls, we ought to be able to run Nachos on top of Nachos!</li>
</ul>
<p>The procedures in this class are defined in <code><a class="el" href="machine_8cc.html">machine.cc</a></code> and <code><a class="el" href="mips__sim_8cc.html">mips_sim.cc</a></code>. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="af6543be53421fad8ecce96e32e63528f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af6543be53421fad8ecce96e32e63528f">&#9670;&nbsp;</a></span>Machine()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Machine::Machine </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classSingleStepper.html">SingleStepper</a> *&#160;</td>
          <td class="paramname"><em>st</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize the simulation of the hardware for running user programs. </p>
<p>Initialize the simulation of user program execution.</p>
<ul>
<li><code>st</code> &ndash; pointer to an object that performs single stepping, for dropping into it after each user instruction is executed; if null, execute normally, without single stepping. </li>
</ul>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ae5de41e68ec14b975e152d963a557ce7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae5de41e68ec14b975e152d963a557ce7">&#9670;&nbsp;</a></span>DelayedLoad()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Machine::DelayedLoad </td>
          <td>(</td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>nextReg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nextValue</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Do a pending delayed load (modifying a reg). </p>
<p>Simulate effects of a delayed load.</p>
<p>NOTE &ndash; <code>RaiseException</code>/<code>CheckInterrupts</code> must also call <code>DelayedLoad</code>, since any delayed load must get applied before we trap to the kernel. </p>

</div>
</div>
<a id="a4e4dee4ed66da41de9bbebb161efd06f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4e4dee4ed66da41de9bbebb161efd06f">&#9670;&nbsp;</a></span>DumpState()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Machine::DumpState </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Print the user CPU and memory state. </p>

</div>
</div>
<a id="a4c809e0409d65e966ded14d46a9b3d5f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4c809e0409d65e966ded14d46a9b3d5f">&#9670;&nbsp;</a></span>ExecInstruction()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Machine::ExecInstruction </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classInstruction.html">Instruction</a> *&#160;</td>
          <td class="paramname"><em>instr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Run a certain instruction of a user program. </p>
<p>Execute one instruction from a user-level program.</p>
<p>If there is any kind of exception or interrupt, we invoke the exception handler, and when it returns, we return to <code>Run</code>, which will re-invoke us in a loop. This allows us to re-start the instruction execution from the beginning, in case any of our state has changed. On a syscall, the OS software must increment the PC so execution begins at the instruction immediately after the syscall.</p>
<p>This routine is re-entrant, in that it can be called multiple times concurrently &ndash; one for each thread executing user code. We get re-entrancy by never caching any data &ndash; we always re-start the simulation from scratch each time we are called (or after trapping back to the Nachos kernel on an exception or interrupt), and we always store all data back to the machine registers and memory before leaving. This allows the Nachos kernel to control our behavior by controlling the contents of memory, the translation table, and the register set. </p>

</div>
</div>
<a id="a044ebcc05c8ff8f1e65f9c119d7de5e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a044ebcc05c8ff8f1e65f9c119d7de5e6">&#9670;&nbsp;</a></span>FetchInstruction()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Machine::FetchInstruction </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classInstruction.html">Instruction</a> *&#160;</td>
          <td class="paramname"><em>instr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Routines internal to the machine simulation &ndash; DO NOT call these. </p>
<p>Fetch one instruction of a user program.</p>
<p>Return false if an exception occurs, true otherwise. </p>

</div>
</div>
<a id="a4dbd6351c4a55955da985a5ea28d7fa2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4dbd6351c4a55955da985a5ea28d7fa2">&#9670;&nbsp;</a></span>GetMMU()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classMMU.html">MMU</a> * Machine::GetMMU </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ac0edcafa62d3c8cf1faa8acc02f23eb2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac0edcafa62d3c8cf1faa8acc02f23eb2">&#9670;&nbsp;</a></span>GetRegisters()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const int * Machine::GetRegisters </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a73f0ad9597d4a12783e2ae8bb0ec9bcf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a73f0ad9597d4a12783e2ae8bb0ec9bcf">&#9670;&nbsp;</a></span>RaiseException()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Machine::RaiseException </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="exception__type_8hh.html#a0e0f0f1661d7aeb71ed9698bff6c6383">ExceptionType</a>&#160;</td>
          <td class="paramname"><em>et</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>badVAddr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Trap to the Nachos kernel, because of a system call or other exception.</p>
<p>Transfer control to the Nachos kernel from user mode, because the user program either invoked a system call, or some exception occured (such as the address translation failed).</p>
<ul>
<li><code>et</code> is the cause of the kernel trap</li>
<li><code>badVaddr</code> is the virtual address causing the trap, if appropriate. </li>
</ul>

</div>
</div>
<a id="a8852a4e40841bc084edec1e198ff9b5c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8852a4e40841bc084edec1e198ff9b5c">&#9670;&nbsp;</a></span>ReadMem()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Machine::ReadMem </td>
          <td>(</td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Wrappers for <a class="el" href="classMMU.html">MMU</a> methods. These wrappers raise an exception in the machine if needed. </p>

</div>
</div>
<a id="a46d88d5730e9da23cff9993011ce562c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a46d88d5730e9da23cff9993011ce562c">&#9670;&nbsp;</a></span>ReadRegister()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Machine::ReadRegister </td>
          <td>(</td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>num</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read the contents of a CPU register. </p>
<p>Fetch or write the contents of a user program register. </p>

</div>
</div>
<a id="a83444e06eb7a7c163a1b9c87a7062d43"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a83444e06eb7a7c163a1b9c87a7062d43">&#9670;&nbsp;</a></span>Run()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Machine::Run </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Routines callable by the Nachos kernel. </p>
<p>Run a user program.</p>
<p>Simulate a MIPS R2/3000 processor.</p>
<p>This code has been adapted from Ousterhout's MIPSSIM package. Byte ordering is little-endian, so we can be compatible with DEC RISC systems.</p>
<p>DO NOT CHANGE &ndash; part of the machine emulation</p>
<p>Copyright (c) 1992-1993 The Regents of the University of California. 2016-2021 Docentes de la Universidad Nacional de Rosario. All rights reserved. See <code><a class="el" href="copyright_8h.html">copyright.h</a></code> for copyright notice and limitation of liability and disclaimer of warranty provisions. Simulate the execution of a user-level program on Nachos.</p>
<p>Called by the kernel when the program starts up; never returns.</p>
<p>This routine is re-entrant, in that it can be called multiple times concurrently &ndash; one for each thread executing user code. </p>

</div>
</div>
<a id="a64c163986d58f1fe6a85524ed9185f28"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a64c163986d58f1fe6a85524ed9185f28">&#9670;&nbsp;</a></span>SetHandler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Machine::SetHandler </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="exception__type_8hh.html#a0e0f0f1661d7aeb71ed9698bff6c6383">ExceptionType</a>&#160;</td>
          <td class="paramname"><em>et</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="machine_8hh.html#afcd896951d835dc9bcd77ad8396f6c5e">ExceptionHandler</a>&#160;</td>
          <td class="paramname"><em>handler</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Register an exception handler: a callback kernel function to invoke when an exception of a certain type is raised.</p>
<p>Such handlers are the entry points into the kernel. The exception type is passed to the handler as an argument, so the same handler can be assigned to multiple exception types. </p>

</div>
</div>
<a id="a4de45aa839be2dc88f032a6353c73b98"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4de45aa839be2dc88f032a6353c73b98">&#9670;&nbsp;</a></span>WriteMem()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Machine::WriteMem </td>
          <td>(</td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="aecda41e584e2dedd77d162304eb54723"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aecda41e584e2dedd77d162304eb54723">&#9670;&nbsp;</a></span>WriteRegister()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Machine::WriteRegister </td>
          <td>(</td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Store a value into a CPU register. </p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a7bf5fc69695180a7755f5d0428008528"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7bf5fc69695180a7755f5d0428008528">&#9670;&nbsp;</a></span>handlers</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="machine_8hh.html#afcd896951d835dc9bcd77ad8396f6c5e">ExceptionHandler</a> Machine::handlers[<a class="el" href="exception__type_8hh.html#a0e0f0f1661d7aeb71ed9698bff6c6383a83e7a5ff1701f68a8ca17dad10f8f8d2">NUM_EXCEPTION_TYPES</a>]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Exception handlers. </p>

</div>
</div>
<a id="a5e4e41fcb726e843a34280b51bdd3e8d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5e4e41fcb726e843a34280b51bdd3e8d">&#9670;&nbsp;</a></span>mmu</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classMMU.html">MMU</a> Machine::mmu</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Memory management unit. </p>

</div>
</div>
<a id="a4dc9471bcc258a7a53dcc7882a82f5a7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4dc9471bcc258a7a53dcc7882a82f5a7">&#9670;&nbsp;</a></span>registers</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int Machine::registers[<a class="el" href="machine_8hh.html#abc6126af1d45847bc59afa0aa3216b04a06332796405f8d377bb2cffb4f4c74ba">NUM_TOTAL_REGS</a>]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Private data structures. </p>
<p>CPU registers, for executing user programs. </p>

</div>
</div>
<a id="a936fbc06813c81a9db50e716eb3375d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a936fbc06813c81a9db50e716eb3375d1">&#9670;&nbsp;</a></span>singleStepper</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classSingleStepper.html">SingleStepper</a>* Machine::singleStepper</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Drop back into the method of a provided object (may be a debugger) after each simulated instruction. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>code/machine/<a class="el" href="machine_8hh_source.html">machine.hh</a></li>
<li>code/machine/<a class="el" href="machine_8cc.html">machine.cc</a></li>
<li>code/machine/<a class="el" href="mips__sim_8cc.html">mips_sim.cc</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
