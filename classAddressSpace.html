<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NachOS: AddressSpace Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NachOS
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classAddressSpace-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">AddressSpace Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="address__space_8hh_source.html">address_space.hh</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aaa76dac676b0243b554b207df21cae0d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAddressSpace.html#aaa76dac676b0243b554b207df21cae0d">AddressSpace</a> (<a class="el" href="classOpenFile.html">OpenFile</a> *executable_file)</td></tr>
<tr class="separator:aaa76dac676b0243b554b207df21cae0d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aecd86fc6aed0273a81f0020ae28322b3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAddressSpace.html#aecd86fc6aed0273a81f0020ae28322b3">~AddressSpace</a> ()</td></tr>
<tr class="memdesc:aecd86fc6aed0273a81f0020ae28322b3"><td class="mdescLeft">&#160;</td><td class="mdescRight">De-allocate an address space.  <a href="classAddressSpace.html#aecd86fc6aed0273a81f0020ae28322b3">More...</a><br /></td></tr>
<tr class="separator:aecd86fc6aed0273a81f0020ae28322b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a917cc877bd664f69b74a1aa5d76539e8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAddressSpace.html#a917cc877bd664f69b74a1aa5d76539e8">InitRegisters</a> ()</td></tr>
<tr class="memdesc:a917cc877bd664f69b74a1aa5d76539e8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize user-level CPU registers, before jumping to user code.  <a href="classAddressSpace.html#a917cc877bd664f69b74a1aa5d76539e8">More...</a><br /></td></tr>
<tr class="separator:a917cc877bd664f69b74a1aa5d76539e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a132878c2e84f8dfc98a18f34c2368c4b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAddressSpace.html#a132878c2e84f8dfc98a18f34c2368c4b">SaveState</a> ()</td></tr>
<tr class="memdesc:a132878c2e84f8dfc98a18f34c2368c4b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Save/restore address space-specific info on a context switch.  <a href="classAddressSpace.html#a132878c2e84f8dfc98a18f34c2368c4b">More...</a><br /></td></tr>
<tr class="separator:a132878c2e84f8dfc98a18f34c2368c4b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d4468e6bb7dbe336ad4247cbb9bd946"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAddressSpace.html#a0d4468e6bb7dbe336ad4247cbb9bd946">RestoreState</a> ()</td></tr>
<tr class="separator:a0d4468e6bb7dbe336ad4247cbb9bd946"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a6860dc282b68dd828f72f4aa02792f52"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classTranslationEntry.html">TranslationEntry</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAddressSpace.html#a6860dc282b68dd828f72f4aa02792f52">pageTable</a></td></tr>
<tr class="memdesc:a6860dc282b68dd828f72f4aa02792f52"><td class="mdescLeft">&#160;</td><td class="mdescRight">Assume linear page table translation for now!  <a href="classAddressSpace.html#a6860dc282b68dd828f72f4aa02792f52">More...</a><br /></td></tr>
<tr class="separator:a6860dc282b68dd828f72f4aa02792f52"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6112cc03328392e23e5cfd21f092b49d"><td class="memItemLeft" align="right" valign="top">unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAddressSpace.html#a6112cc03328392e23e5cfd21f092b49d">numPages</a></td></tr>
<tr class="memdesc:a6112cc03328392e23e5cfd21f092b49d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of pages in the virtual address space.  <a href="classAddressSpace.html#a6112cc03328392e23e5cfd21f092b49d">More...</a><br /></td></tr>
<tr class="separator:a6112cc03328392e23e5cfd21f092b49d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="aaa76dac676b0243b554b207df21cae0d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa76dac676b0243b554b207df21cae0d">&#9670;&nbsp;</a></span>AddressSpace()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AddressSpace::AddressSpace </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classOpenFile.html">OpenFile</a> *&#160;</td>
          <td class="paramname"><em>executable_file</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Create an address space to run a user program.</p>
<p>The address space is initialized from an already opened file. The program contained in the file is loaded into memory and everything is set up so that user instructions can start to be executed.</p>
<p>Parameters:</p><ul>
<li><code>executable_file</code> is the open file that corresponds to the program; it contains the object code to load into memory.</li>
</ul>
<p>Routines to manage address spaces (memory for executing user programs).</p>
<p>Copyright (c) 1992-1993 The Regents of the University of California. 2016-2021 Docentes de la Universidad Nacional de Rosario. All rights reserved. See <code><a class="el" href="copyright_8h.html">copyright.h</a></code> for copyright notice and limitation of liability and disclaimer of warranty provisions. First, set up the translation from program memory to physical memory. For now, this is really simple (1:1), since we are only uniprogramming, and we have a single unsegmented page table. </p>

</div>
</div>
<a id="aecd86fc6aed0273a81f0020ae28322b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aecd86fc6aed0273a81f0020ae28322b3">&#9670;&nbsp;</a></span>~AddressSpace()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AddressSpace::~AddressSpace </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>De-allocate an address space. </p>
<p>Deallocate an address space.</p>
<p>Nothing for now! </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a917cc877bd664f69b74a1aa5d76539e8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a917cc877bd664f69b74a1aa5d76539e8">&#9670;&nbsp;</a></span>InitRegisters()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AddressSpace::InitRegisters </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize user-level CPU registers, before jumping to user code. </p>
<p>Set the initial values for the user-level register set.</p>
<p>We write these directly into the “machine” registers, so that we can immediately jump to user code. Note that these will be saved/restored into the <code>currentThread-&gt;userRegisters</code> when this thread is context switched out. </p>

</div>
</div>
<a id="a0d4468e6bb7dbe336ad4247cbb9bd946"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0d4468e6bb7dbe336ad4247cbb9bd946">&#9670;&nbsp;</a></span>RestoreState()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AddressSpace::RestoreState </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>On a context switch, restore the machine state so that this address space can run.</p>
<p>For now, tell the machine where to find the page table. </p>

</div>
</div>
<a id="a132878c2e84f8dfc98a18f34c2368c4b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a132878c2e84f8dfc98a18f34c2368c4b">&#9670;&nbsp;</a></span>SaveState()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AddressSpace::SaveState </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Save/restore address space-specific info on a context switch. </p>
<p>On a context switch, save any machine state, specific to this address space, that needs saving.</p>
<p>For now, nothing! </p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a6112cc03328392e23e5cfd21f092b49d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6112cc03328392e23e5cfd21f092b49d">&#9670;&nbsp;</a></span>numPages</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned AddressSpace::numPages</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Number of pages in the virtual address space. </p>

</div>
</div>
<a id="a6860dc282b68dd828f72f4aa02792f52"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6860dc282b68dd828f72f4aa02792f52">&#9670;&nbsp;</a></span>pageTable</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classTranslationEntry.html">TranslationEntry</a>* AddressSpace::pageTable</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Assume linear page table translation for now! </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>code/userprog/<a class="el" href="address__space_8hh_source.html">address_space.hh</a></li>
<li>code/userprog/<a class="el" href="address__space_8cc.html">address_space.cc</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
