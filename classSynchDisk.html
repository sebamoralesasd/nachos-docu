<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NachOS: SynchDisk Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NachOS
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classSynchDisk-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">SynchDisk Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="synch__disk_8hh_source.html">synch_disk.hh</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aa6cc1815e0aca2d6fe11d426942e6538"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSynchDisk.html#aa6cc1815e0aca2d6fe11d426942e6538">SynchDisk</a> (const char *name)</td></tr>
<tr class="memdesc:aa6cc1815e0aca2d6fe11d426942e6538"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize a synchronous disk, by initializing the raw <a class="el" href="classDisk.html">Disk</a>.  <a href="classSynchDisk.html#aa6cc1815e0aca2d6fe11d426942e6538">More...</a><br /></td></tr>
<tr class="separator:aa6cc1815e0aca2d6fe11d426942e6538"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e0c6875e2a243e4176b6da29fdf392b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSynchDisk.html#a0e0c6875e2a243e4176b6da29fdf392b">~SynchDisk</a> ()</td></tr>
<tr class="memdesc:a0e0c6875e2a243e4176b6da29fdf392b"><td class="mdescLeft">&#160;</td><td class="mdescRight">De-allocate the synch disk data.  <a href="classSynchDisk.html#a0e0c6875e2a243e4176b6da29fdf392b">More...</a><br /></td></tr>
<tr class="separator:a0e0c6875e2a243e4176b6da29fdf392b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d8195bd5d464e4771946eb03c61e8c8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSynchDisk.html#a7d8195bd5d464e4771946eb03c61e8c8">ReadSector</a> (int sectorNumber, char *<a class="el" href="structdata.html">data</a>)</td></tr>
<tr class="separator:a7d8195bd5d464e4771946eb03c61e8c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a34a2c462460f3386ed97293d40a7a47b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSynchDisk.html#a34a2c462460f3386ed97293d40a7a47b">WriteSector</a> (int sectorNumber, const char *<a class="el" href="structdata.html">data</a>)</td></tr>
<tr class="separator:a34a2c462460f3386ed97293d40a7a47b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a973a65b7b7b92f5fabf18da8b8bae402"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSynchDisk.html#a973a65b7b7b92f5fabf18da8b8bae402">RequestDone</a> ()</td></tr>
<tr class="separator:a973a65b7b7b92f5fabf18da8b8bae402"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a8999601462179076bfd16a20d56efc0b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classDisk.html">Disk</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSynchDisk.html#a8999601462179076bfd16a20d56efc0b">disk</a></td></tr>
<tr class="memdesc:a8999601462179076bfd16a20d56efc0b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Raw disk device.  <a href="classSynchDisk.html#a8999601462179076bfd16a20d56efc0b">More...</a><br /></td></tr>
<tr class="separator:a8999601462179076bfd16a20d56efc0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5fc105281b2871f863df2e955b8f3ed2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classSemaphore.html">Semaphore</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSynchDisk.html#a5fc105281b2871f863df2e955b8f3ed2">semaphore</a></td></tr>
<tr class="separator:a5fc105281b2871f863df2e955b8f3ed2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a49e93079ba87bb0da8c724883e50ff"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classLock.html">Lock</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSynchDisk.html#a7a49e93079ba87bb0da8c724883e50ff">lock</a></td></tr>
<tr class="separator:a7a49e93079ba87bb0da8c724883e50ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Data structures to export a synchronous interface to the raw disk device.</p>
<p>Copyright (c) 1992-1993 The Regents of the University of California. 2016-2021 Docentes de la Universidad Nacional de Rosario. All rights reserved. See <code><a class="el" href="copyright_8h.html">copyright.h</a></code> for copyright notice and limitation of liability and disclaimer of warranty provisions. The following class defines a "synchronous" disk abstraction.</p>
<p>As with other I/O devices, the raw physical disk is an asynchronous device &ndash; requests to read or write portions of the disk return immediately, and an interrupt occurs later to signal that the operation completed. (Also, the physical characteristics of the disk device assume that only one operation can be requested at a time).</p>
<p>This class provides the abstraction that for any individual thread making a request, it waits around until the operation finishes before returning. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="aa6cc1815e0aca2d6fe11d426942e6538"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa6cc1815e0aca2d6fe11d426942e6538">&#9670;&nbsp;</a></span>SynchDisk()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SynchDisk::SynchDisk </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize a synchronous disk, by initializing the raw <a class="el" href="classDisk.html">Disk</a>. </p>
<p>Initialize the synchronous interface to the physical disk, in turn initializing the physical disk.</p>
<ul>
<li><code>name</code> is a UNIX file name to be used as storage for the disk data (usually, <code>DISK</code>). </li>
</ul>

</div>
</div>
<a id="a0e0c6875e2a243e4176b6da29fdf392b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0e0c6875e2a243e4176b6da29fdf392b">&#9670;&nbsp;</a></span>~SynchDisk()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SynchDisk::~SynchDisk </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>De-allocate the synch disk data. </p>
<p>De-allocate data structures needed for the synchronous disk abstraction. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a7d8195bd5d464e4771946eb03c61e8c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7d8195bd5d464e4771946eb03c61e8c8">&#9670;&nbsp;</a></span>ReadSector()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SynchDisk::ReadSector </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sectorNumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Read/write a disk sector, returning only once the data is actually read or written. These call <code><a class="el" href="classDisk.html#aba6661a241f1f60aa8da5122e2a91c3e">Disk::ReadRequest</a></code>/<code>WriteRequest</code> and then wait until the request is done.</p>
<p>Read the contents of a disk sector into a buffer. Return only after the data has been read.</p>
<ul>
<li><code>sectorNumber</code> is the disk sector to read.</li>
<li><code>data</code> is the buffer to hold the contents of the disk sector. </li>
</ul>

</div>
</div>
<a id="a973a65b7b7b92f5fabf18da8b8bae402"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a973a65b7b7b92f5fabf18da8b8bae402">&#9670;&nbsp;</a></span>RequestDone()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SynchDisk::RequestDone </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Called by the disk device interrupt handler, to signal that the current disk operation is complete.</p>
<p><a class="el" href="classDisk.html">Disk</a> interrupt handler. Wake up any thread waiting for the disk request to finish. </p>

</div>
</div>
<a id="a34a2c462460f3386ed97293d40a7a47b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a34a2c462460f3386ed97293d40a7a47b">&#9670;&nbsp;</a></span>WriteSector()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SynchDisk::WriteSector </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sectorNumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Write the contents of a buffer into a disk sector. Return only after the data has been written.</p>
<ul>
<li><code>sectorNumber</code> is the disk sector to be written.</li>
<li><code>data</code> are the new contents of the disk sector. </li>
</ul>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a8999601462179076bfd16a20d56efc0b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8999601462179076bfd16a20d56efc0b">&#9670;&nbsp;</a></span>disk</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classDisk.html">Disk</a>* SynchDisk::disk</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Raw disk device. </p>

</div>
</div>
<a id="a7a49e93079ba87bb0da8c724883e50ff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7a49e93079ba87bb0da8c724883e50ff">&#9670;&nbsp;</a></span>lock</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classLock.html">Lock</a>* SynchDisk::lock</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Only one read/write request can be sent to the disk at a time. </p>

</div>
</div>
<a id="a5fc105281b2871f863df2e955b8f3ed2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5fc105281b2871f863df2e955b8f3ed2">&#9670;&nbsp;</a></span>semaphore</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classSemaphore.html">Semaphore</a>* SynchDisk::semaphore</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>To synchronize requesting thread with the interrupt handler. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>code/filesys/<a class="el" href="synch__disk_8hh_source.html">synch_disk.hh</a></li>
<li>code/filesys/<a class="el" href="synch__disk_8cc.html">synch_disk.cc</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
